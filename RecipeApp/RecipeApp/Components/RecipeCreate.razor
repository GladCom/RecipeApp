@page "/recipes/new"
@using RecipeApp.Model
@inject RecipesDbContext DbContext
@inject NavigationManager NavigationManager

<RecipeForm Recipe="recipe" OnSave="Save" OnCancel="Cancel" IsEditMode="false" />

@code {
  private Recipe recipe = new() { Ingredients = new List<Ingredient>() };

  async Task Save()
  {
    DbContext.Recipes.Add(recipe);
    await DbContext.SaveChangesAsync();
    NavigationManager.NavigateTo("/");
  }

  void Cancel() => NavigationManager.NavigateTo("/");
}